<%- include('../partial/admin/header') %>
<div class="container">
 
    <h3>Add Event</h3>
    <form action="/admin/calender/addEvent" method="POST" enctype="multipart/form-data">
        <div class="form-group">
          <input type="hidden" class="form-control" value="<%= JSON.stringify(cald) %>" id="cald" />

          <label for="email">Title:</label>
          <input type="text" class="form-control"  placeholder="enter title" name="title" id="title" />
        </div>
        <div class="form-group">
          <label for="email">Start Date:</label>
          <input type="date" class="form-control"   name="startDate" id="slug" />
        </div>
        <div class="form-group">
            <label for="email">End Date:</label>
            <input type="date" class="form-control"  name="endDate" id="title" />
          </div>
      
        <input type="submit" class="btn btn-default" value="Add">
      </form>

    <h3>Event Calender</h3>
   
  
    <div id='calendar'></div>
   
</div>

<script>
  $(document).ready(function(){
   
 
  var pop = JSON.parse($('#cald').val());

let data=[]
$.each(pop,function(i,doc){
  datas={
    title:doc.title,
      start:doc.startDate
  }
		data.push(datas)
     
    });
    console.log(data)
      var calendarEl = document.getElementById('calendar');
  
      var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        initialDate: '2022-01-01',
        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: 'dayGridMonth,timeGridWeek,timeGridDay'
        },
        events: data
      });
     
     
    
      calendar.render();

  
   
  })
  </script>

<%- include('../partial/admin/footer') %>